<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>General Usage · WidebandDoA.jl</title><meta name="title" content="General Usage · WidebandDoA.jl"/><meta property="og:title" content="General Usage · WidebandDoA.jl"/><meta property="twitter:title" content="General Usage · WidebandDoA.jl"/><meta name="description" content="Documentation for WidebandDoA.jl."/><meta property="og:description" content="Documentation for WidebandDoA.jl."/><meta property="twitter:description" content="Documentation for WidebandDoA.jl."/><meta property="og:url" content="https://Red-Portal.github.io/WidebandDoA.jl/general/"/><meta property="twitter:url" content="https://Red-Portal.github.io/WidebandDoA.jl/general/"/><link rel="canonical" href="https://Red-Portal.github.io/WidebandDoA.jl/general/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">WidebandDoA.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>General Usage</a><ul class="internal"><li><a class="tocitem" href="#Sampling"><span>Sampling</span></a></li><li><a class="tocitem" href="#Bayesian-Model"><span>Bayesian Model</span></a></li><li><a class="tocitem" href="#Simulating-Data"><span>Simulating Data</span></a></li><li><a class="tocitem" href="#Reconstruction"><span>Reconstruction</span></a></li><li><a class="tocitem" href="#Relabling"><span>Relabling</span></a></li></ul></li><li><a class="tocitem" href="../inference/">Inference</a></li><li><a class="tocitem" href="../demonstration/">Demonstration</a></li><li><a class="tocitem" href="../baseline/">Validation of Baseline</a></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>General Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>General Usage</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/main/docs/src/general.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="General-Usage"><a class="docs-heading-anchor" href="#General-Usage">General Usage</a><a id="General-Usage-1"></a><a class="docs-heading-anchor-permalink" href="#General-Usage" title="Permalink"></a></h1><p>We provide detailed documentation of <code>WidebandDoA</code> and <code>ReversibleJump</code> here. A comprehensive example usage of these functionalities can be found in the <a href="../demonstration/#demo">demo</a></p><h2 id="Sampling"><a class="docs-heading-anchor" href="#Sampling">Sampling</a><a id="Sampling-1"></a><a class="docs-heading-anchor-permalink" href="#Sampling" title="Permalink"></a></h2><p>This package uses <a href="https://github.com/Red-Portal/ReversibleJump.jl"><code>ReversibleJump</code></a> for drawing samples. To draw samples, the user needs to call the following function</p><pre><code class="language-julia hljs">ReversibleJump.sample([rng,] sampler, model, N, initial_order; initial_params, show_progress)</code></pre><h3 id="Arguments"><a class="docs-heading-anchor" href="#Arguments">Arguments</a><a id="Arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Arguments" title="Permalink"></a></h3><ul><li><code>sampler</code>: An RJMCMC sampler provided by <code>ReversibleJump</code>.</li><li><code>model</code>: A model provided by <code>WidebandDoA</code> conditioned on data.</li><li><code>N::Int</code>: The number of samples.</li><li><code>initial_order::Int</code>: The model order of <code>initial_params</code>.</li></ul><h3 id="Keyword-Arguments"><a class="docs-heading-anchor" href="#Keyword-Arguments">Keyword Arguments</a><a id="Keyword-Arguments-1"></a><a class="docs-heading-anchor-permalink" href="#Keyword-Arguments" title="Permalink"></a></h3><ul><li><code>show_progress::Bool</code>: Whether to enable <code>ProgresMeter</code></li><li><code>initial_params</code>: The initial state of the Markov chain. The order of this parameter must match <code>initial_order</code> for correct results.</li></ul><p>For more details about the available options for <code>sampler</code>, refer to <a href="../inference/#inference">here</a>.</p><h2 id="Bayesian-Model"><a class="docs-heading-anchor" href="#Bayesian-Model">Bayesian Model</a><a id="Bayesian-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Bayesian-Model" title="Permalink"></a></h2><p>The Bayesian model described in the paper can be constructed through the following constructor:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="WidebandDoA.WidebandIsoIsoModel-general" href="#WidebandDoA.WidebandIsoIsoModel-general"><code>WidebandDoA.WidebandIsoIsoModel</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WidebandIsoIsoModel(n_samples, Δx, c, fs, source_prior, α, β, order_prior, n_fft)</code></pre><p>Model for wideband signal model with isotropic normal source prior and isotropic normal noise prior.</p><p><strong>Arguments</strong></p><ul><li><code>n_samples::Int</code>: Number of samples of the received signal.</li><li><code>Δx::AbstractVector</code>: Relative sensor location [m].</li><li><code>c::Real</code>: Propagation speed of the medium [m/s].</li><li><code>fs::Real</code>: Sampling frequency [Hz].</li><li><code>source_prior::UnivariateDistribution</code>: Prior on the SNR parameter (<span>$\gamma_j$</span> in the paper) of the sources.</li><li><code>α::Real</code>: <span>$\alpha$</span> hyperparameter of the inerse-gamma prior on the signal standard deviation (<span>$\sigma$</span> in the paper; default: 0)</li><li><code>β::Real</code> <span>$\beta$</span> hyperparameter of the inerse-gamma prior on the signal standard deviation (<span>$\sigma$</span> in the paper; default: 0)</li><li><code>order_prior::DiscreteDistribution</code>: Prior on the model order (<span>$k$</span> in the paper; default: <code>NegativeBinomial(1/2 + 0.1, 0.1/(0.1 + 1))</code>)</li><li><code>n_fft::Int</code>: Length of the source signals. (default: <code>n_samples*2</code>)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/model/isoiso/model.jl#L3-L18">source</a></section></article><p><code>IsoIso</code> in the name indicates that we are using an isotrpoic normal prior on both the source signals and the noise.</p><p>This model can be conditioned on data by invoking the following constructor:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="WidebandDoA.WidebandConditioned-general" href="#WidebandDoA.WidebandConditioned-general"><code>WidebandDoA.WidebandConditioned</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WidebandConditioned(model, y)</code></pre><p><code>model</code> conditioned on <code>y</code>.</p><p><strong>Arguments</strong></p><ul><li><code>model::AbstractWidebandModel</code>: Signal model.</li><li><code>y::AbstractMatrix</code>: Received data, where the rows are the channels (sersors), while the columns are the signals.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/components/conditioned.jl#L23-L31">source</a></section></article><p>The overall process is as follows. Given a received signal <code>y</code>:</p><pre><code class="language-julia hljs">model = WidebandDoA.WidebandIsoIsoModel(
    N, Δx, c, fs, source_prior, alpha, beta; order_prior
)
cond  = WidebandConditioned(model, y)</code></pre><p>This can then be used with <code>ReversibleJump.sample</code>.</p><h2 id="Simulating-Data"><a class="docs-heading-anchor" href="#Simulating-Data">Simulating Data</a><a id="Simulating-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Simulating-Data" title="Permalink"></a></h2><p>Given a <code>model</code>, prior and likelihood simulations can be done through the following specialization of <code>Base.rand</code>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.rand-general" href="#Base.rand-general"><code>Base.rand</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">rand(rng, model)</code></pre><p>Sample from a wideband signal model.</p><p><strong>Arguments</strong></p><ul><li><code>rng::Random.AbstractRNG</code></li><li><code>model</code>: Wideband signal model.</li></ul><p><strong>Returns</strong></p><ul><li><code>params</code>: <code>NamedTuple</code> containing the model parameters.</li><li><code>data</code>: Simulated received data.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/WidebandDoA.jl#L92-L104">source</a></section><section><div><pre><code class="language-julia hljs">rand(rng, prior::WidebandIsoSourcePrior, )</code></pre><p>Sample from prior with isotropic source covariance prior.</p><p><strong>Arguments</strong></p><ul><li><code>rng::Random.AbstractRNG</code>: Random number generator.</li><li><code>prior::WidebandIsoSourcePrior</code>: Prior.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>k</code>: Model order. (Default samples from <code>prior.model_order</code>.)</li><li><code>sigma</code>: Signal standard deviation. (Default samples from <code>InverseGamma(prior.alpha, prior.beta)</code>.)</li><li><code>phi</code>: DoA of each sources. (Length must match <code>k</code>; default samples from the uniform distribution over the interval <span>$[-\pi/2 , \pi/2]$</span>.)</li><li><code>lambda</code>: SNR parameter for each source. (Length must match <code>k</code>; default samples from <code>prior.source_prior</code>.)</li></ul><p>The sampling process is:</p><p class="math-container">\[\begin{aligned}
    k &amp;\sim \text{\tt{}prior.model\_order} \\
    \sigma &amp;\sim \text{\textsf{Inv-Gamma}}(\texttt{prior.alpha}, \text{\texttt{prior.beta}}) \\
    \phi_j \mid k &amp;\sim \text{\textsf{Uniform}}\left(-\frac{\pi}{2}, \frac{\pi}{2}\right) \\
    \lambda_j \mid k &amp;\sim \text{\tt{}prior.source\_prior} \\
    x_j \mid k, \sigma, \lambda_j &amp;\sim \mathcal{N}\left(0, \sigma \lambda_j \mathrm{I} \right)
\end{aligned}\]</p><p><strong>Returns</strong></p><ul><li><code>params</code>: Parameter of wideband signal model. (keys: <code>k, phi, lambda, sigma, x</code>)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/components/isoprior.jl#L53-L82">source</a></section><section><div><pre><code class="language-julia hljs">rand(rng, likelihood::WidebandIsoIsoLikelihood, x, phi; prior, sigma)</code></pre><p>Sample from the collapsed likelihood for the model with isotropic normal prior and isotropic normal noise.</p><p><strong>Arguments</strong></p><ul><li><code>rng::Random.AbstractRNG</code>: Random number generator.</li><li><code>likelihood::WidebandIsoIsoLikelihood</code>: Likelihood.</li><li><code>x::AbstractMatrix</code>: Latent source signals, where rows are the signals and columns are sources.</li><li><code>phi::AbstractVector</code>: Direction-of-arrivals. </li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>prior</code>: Prior object used to sample <code>sigma</code> if needed (default: <code>nothing</code>).</li><li><code>sigma</code>: Signal standard deviation. (Default samples from <code>InverseGamma(prior.alpha, prior.beta)</code>)</li></ul><p><strong>Returns</strong></p><ul><li><code>y</code>: A simulated received signal, where the rows are the channels (sensors) and the columns are received signals.</li></ul><p>The sampling process is as follows:</p><p class="math-container">\[\begin{aligned}
    \epsilon &amp;\sim \mathcal{N}(0, \sigma^2 \mathrm{I}) \\
    x         &amp;\sim \mathcal{N}(0, \sigma^2 H \Lambda H^{\top}) \\
    y         &amp;= x + \epsilon  
\end{aligned}\]</p><p>and the noise <span>$\epsilon$</span>,</p><p class="math-container">\[\begin{aligned}
    y         &amp;\sim \mathcal{N}(0, \sigma^2 \left( H \Lambda H^{\top} + \mathrm{I} \right)).
\end{aligned}\]</p><p>Sampling from this distribution is as simple as</p><p class="math-container">\[\begin{aligned}
  y = \sigma H \Lambda^{1/2} z_x + \sigma z_{\epsilon},
\end{aligned}\]</p><p>where <span>$z_x$</span> and <span>$z_{\epsilon}$</span> are independent standard Gaussian vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/components/isoisolikelihood.jl#L102-L141">source</a></section></article><h2 id="Reconstruction"><a class="docs-heading-anchor" href="#Reconstruction">Reconstruction</a><a id="Reconstruction-1"></a><a class="docs-heading-anchor-permalink" href="#Reconstruction" title="Permalink"></a></h2><p>Given a conditioned model, reconstruction of the latent signals conditional on a set of parameters can be done through the following function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="WidebandDoA.reconstruct-general" href="#WidebandDoA.reconstruct-general"><code>WidebandDoA.reconstruct</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reconstruct(cond::WidebandConditioned, params)</code></pre><p>Conditional posterior of the latent source signals for reconstruction given conditioned model <code>cond</code> and <code>params</code></p><p><strong>Arguments</strong></p><ul><li><code>cond::WidebandConditioned</code>: Conditioned model.</li><li><code>params</code>: Additional parameters we need to condition on.</li></ul><p><strong>Returns</strong></p><ul><li><code>cond_post</code>: Conditional posterior for the latent source signals.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/WidebandDoA.jl#L107-L118">source</a></section></article><h2 id="Relabling"><a class="docs-heading-anchor" href="#Relabling">Relabling</a><a id="Relabling-1"></a><a class="docs-heading-anchor-permalink" href="#Relabling" title="Permalink"></a></h2><p>As explained in the paper, to analyze the individual sources, the RJMCMC samplers need to be relabeled.  The labels and the Gaussian mixture approximation on the DoAs can be generated through the following function:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="WidebandDoA.relabel-general" href="#WidebandDoA.relabel-general"><code>WidebandDoA.relabel</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">relabel(rng, samples, n_mixture; n_iter, n_imh_iter, show_progress)</code></pre><p>Relabel the RJMCMC samples <code>samples</code> into <code>n_mixture</code> Gaussian mixtures according to the stochastic expectation maximization (SEM) procedure of Roodaki et al. 2014<sup class="footnote-reference"><a id="citeref-RBF2014" href="#footnote-RBF2014">[RBF2014]</a></sup>. </p><p><strong>Arguments</strong></p><ul><li><code>rng::Random.AbstractRNG</code></li><li><code>samples::AbstractVector{&lt;:AbstractVector{&lt;:Real}}</code>: Samples subject to relabeling.</li><li><code>n_mixture::Int</code>: Number of component in the Gaussian mixture. Roodaki et al. recommend setting this as the 80% or 90% percentile of model order posterior.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>n_iter::Int</code>: Number of SEM iterations (default: <code>16</code>).</li><li><code>n_mh_iter::Int</code>: Number of Metropolis-Hastings steps for sampling an a label assignment (default: <code>32</code>).</li><li><code>show_progress::Bool</code>: Whether to enable progresss line (default: <code>true</code>).</li></ul><p><strong>Returns</strong></p><ul><li><code>mixture::Distributions.MixtureModel</code>: The Gaussian mixture model fit over <code>samples</code>.</li><li><code>labels::Vector{Vector{Int}}</code>: Labels assigned to each element of each RJCMCM sample.</li></ul><p>The length of each RJCMCMC sample in <code>samples</code> is the model order of that specific sample. Each element of an RJCMCM sample should be the variables that determine which label this element should be associated with.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Red-Portal/WidebandDoA.jl/blob/1578c4c5a2354ddaacda0bedd6a4d3986f1715d0/src/relabel.jl#L160-L183">source</a></section></article><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-RBF2014"><a class="tag is-link" href="#citeref-RBF2014">RBF2014</a>Roodaki, Alireza, Julien Bect, and Gilles Fleury. &quot;Relabeling and summarizing posterior distributions in signal decomposition problems when the number of components is unknown.&quot; <em>IEEE Transactions on Signal Processing</em> (2014).</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../inference/">Inference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 1 October 2024 05:24">Tuesday 1 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
